/* === БАЗА И ТЕМЫ === */
:root{
  --bg:#fff; --text:#000; --card-bg:#fafafa; --accent:#007aff; --border:#ddd;
  /* таббар и отступы */
  --tabbar-bottom:20px;   /* насколько таббар поднят от края экрана */
  --tabbar-h:70px;        /* высота таббара */
  --btn-gap:10px;         /* зазор между кнопкой и розовым таббаром */
  --safe-bottom:calc(var(--tabbar-bottom) + var(--tabbar-h) + var(--btn-gap) + 40px);
  --product-gap:20px;     /* горизонтальный зазор для карточки товара */
}

html{ background:var(--bg); }
html,body{ height:100%; }

[data-theme="dark"]{
  --bg:#121212; --text:#f1f1f1; --card-bg:#1e1e1e; --accent:#0a84ff; --border:#333;
}

body{
  margin:0; padding:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  background:var(--bg); color:var(--text);
  position:fixed; inset:0;
  overflow:hidden;
  overscroll-behavior:none;
}

.app-shell{
  height:100%;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
  padding-bottom:var(--safe-bottom);
  background:var(--bg);
  overscroll-behavior:contain;
}

.screen{display:none; padding:16px; padding-bottom:var(--safe-bottom); box-sizing:border-box;}
.active{display:block;}

/* === ГЛАВНАЯ === */
#menu .hero-banner{margin:-16px -16px 20px;}
.hero-banner img{width:100%; height:auto; display:block; object-fit:cover;}
.intro{ text-align:center; color:#666; margin-bottom:20px;}
.brand-name{ font-family:'Caveat',cursive; font-size:28px; font-weight:600; color:#9B2020; text-align:center; margin:10px 0 5px;}
.discount-banner{ text-align:center; background:#ffe6f3; color:#c2185b; font-weight:600; padding:12px; border-radius:10px; margin:20px 0; }

/* === ЕДИНЫЕ КНОПКИ МАГАЗИНА === */
.shop-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  width: 300px;
  max-width: 320px;
  height: 40px;              /* фиксированная высота */
  margin: 20px auto;
  background: #FFB0E2;
  color: #9B2020;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: transform .1s ease, background .2s ease;
  box-sizing: border-box;
  line-height: 1;
}

.shop-btn:active {
  transform: scale(.96);
  background: #ff96d8;
}

.shop-btn.in-cart {
  background: #9B2020;
  color: #fff;
}

.counter-qty {
  font-weight: 700;
  font-size: 16px;
  min-width: 20px;
  text-align: center;
}

.counter-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: none;
  background: #fff;
  color: #9B2020;
  font-size: 18px;
  font-weight: 600;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
}

/* === КАТАЛОГ === */
.catalog-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; padding:10px; }
.category-card{
  position:relative; overflow:hidden; border-radius:12px; cursor:pointer;
  background:#f9f9f9; box-shadow:0 2px 6px rgba(0,0,0,.1);
  transition:transform .2s, box-shadow .2s; aspect-ratio:3/2;
}
.category-card img{ width:100%; height:100%; object-fit:cover; display:block; }
.category-card:hover{ transform:scale(1.02); box-shadow:0 4px 12px rgba(0,0,0,.2); }
#catalog h2{ margin:0 0 12px; padding:0 10px; font-size:22px; font-weight:bold; }

#product{ padding:6px 0 var(--safe-bottom); }

.category-header{ display:flex; align-items:center; padding:10px; }
#category-page{ padding:6px 0 var(--safe-bottom); }
#category-page .category-header{
  position:sticky;
  top:0;
  z-index:20;
  padding:6px 16px;
  background:var(--bg);
}
#category-page .category-products{ padding:0 16px; }
#product .product-header{
  position:sticky;
  top:0;
  z-index:25;
  padding:6px var(--product-gap);
  justify-content:space-between;
  background:var(--bg);
}
#order-detail .category-header{
  padding-left:0;
  padding-right:0;
}
#order-detail #order-detail-content{
  padding-left:0;
  padding-right:0;
}
.category-header h2{ margin:0; font-size:20px; font-weight:bold; }
.back-btn{ background:none; border:none; color:#9B2020; font-size:26px; margin-right:10px; cursor:pointer; padding:0; }
.fav-btn{
  background:none;
  border:none;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  padding:0;
  line-height:1;
}
.fav-icon{
  width:26px;
  height:26px;
  background-color:#bbb;
  mask:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCc+PHBhdGggZmlsbD0nd2hpdGUnIGQ9J00xMiAyMS4zNWwtMS40NS0xLjMyQzUuNCAxNS4zNiAyIDEyLjI4IDIgOC41IDIgNS40MiA0LjQyIDMgNy41IDNjMS43NCAwIDMuNDEuODEgNC41IDIuMDlDMTMuMDkgMy44MSAxNC43NiAzIDE2LjUgMyAxOS41OCAzIDIyIDUuNDIgMjIgOC41YzAgMy43OC0zLjQgNi44Ni04LjU1IDExLjU0TDEyIDIxLjM1eicvPjwvc3ZnPg==") no-repeat center / contain;
  -webkit-mask:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCc+PHBhdGggZmlsbD0nd2hpdGUnIGQ9J00xMiAyMS4zNWwtMS40NS0xLjMyQzUuNCAxNS4zNiAyIDEyLjI4IDIgOC41IDIgNS40MiA0LjQyIDMgNy41IDNjMS43NCAwIDMuNDEuODEgNC41IDIuMDlDMTMuMDkgMy44MSAxNC43NiAzIDE2LjUgMyAxOS41OCAzIDIyIDUuNDIgMjIgOC41YzAgMy43OC0zLjQgNi44Ni04LjU1IDExLjU0TDEyIDIxLjM1eicvPjwvc3ZnPg==") no-repeat center / contain;
  transition:background-color .2s ease;
}
.fav-btn.active .fav-icon{ background-color:#9B2020; }

/* === ТОВАРЫ В КАТЕГОРИИ === */
.product-card{
  background:#fff; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.1);
  margin-bottom:16px; overflow:hidden; cursor:pointer;
  transition:transform .2s, box-shadow .2s;
}
.product-card:hover{ transform:scale(1.01); box-shadow:0 4px 12px rgba(0,0,0,.2); }

/* мини-карусель внутри карточки */
.product-carousel{ position:relative; width:100%; height:200px; overflow:hidden; }
.product-carousel-track{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
}
.product-carousel-track::-webkit-scrollbar{ display:none; }
.product-carousel img{
  width:100%;
  height:200px;
  object-fit:cover;
  flex:0 0 100%;
  scroll-snap-align:center;
}
.product-carousel .carousel-nav{
  position:absolute; top:50%; transform:translateY(-50%);
  background:rgba(255,255,255,.7); border:none; font-size:22px; padding:6px 10px; cursor:pointer;
}
.product-carousel .prev{ left:8px; } .product-carousel .next{ right:8px; }
.product-info{ padding:10px; text-align:center; }

/* === СТРАНИЦА ТОВАРА === */
.product-container{ padding:12px 0 calc(var(--safe-bottom) + 60px); overflow-y:auto; }

.big-carousel{
  position:relative; width:calc(100% - 2 * var(--product-gap)); height:280px; overflow:hidden;
  border-radius:12px; margin:0 var(--product-gap) 14px;
}
.big-carousel-track{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
}
.big-carousel-track::-webkit-scrollbar{ display:none; }
.big-carousel img{
  width:100%;
  height:280px;
  object-fit:cover;
  flex:0 0 100%;
  scroll-snap-align:center;
}
.big-carousel .carousel-nav{
  position:absolute; top:50%; transform:translateY(-50%);
  background:rgba(255,255,255,.7); border:none; font-size:26px; padding:8px 12px; cursor:pointer;
}
.big-carousel .prev{ left:10px; } .big-carousel .next{ right:10px; }
.product-page-info{ text-align:left; margin-top:10px; padding:0 var(--product-gap); }
.product-price{ font-size:18px; color:#9B2020; margin:6px 0; }
.product-desc{ font-size:15px; line-height:1.4; color:#444; }
.product-variants{ margin:14px 0; display:none; }
.variant-group{ margin-bottom:12px; }
.variant-label{ font-size:14px; font-weight:600; color:#333; margin-bottom:8px; }
.variant-options{ display:flex; gap:10px; flex-wrap:wrap; }
.variant-btn{
  padding:10px 16px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#fff;
  font-size:15px;
  font-weight:600;
  color:#555;
  cursor:pointer;
  transition:background .2s ease, border-color .2s ease, color .2s ease;
}
.variant-btn.active{
  background:#ffb0e2;
  border-color:#ffb0e2;
  color:#9B2020;
}

/* === КНОПКА / СЧЁТЧИК НА СТРАНИЦЕ ТОВАРА === */
.product-footer{
  position:fixed;
  bottom:calc(var(--tabbar-bottom) + var(--tabbar-h) + var(--btn-gap));
  left:0; width:100%; background:transparent; z-index:100;
  display:flex; justify-content:center;
}

/* === КОРЗИНА И ЗАКАЗЫ === */
.order-card{ border:1px solid var(--border); border-radius:10px; padding:10px; margin:8px 0; background:var(--card-bg); }
.checkout-footer{
  position:fixed; bottom:calc(var(--tabbar-h) + 20px);
  background:var(--card-bg); padding:10px; border-top:1px solid var(--border);
  display:flex; align-items:center; gap:12px;
}
.checkout-footer #cart-total{ font-weight:600; }
.checkout-footer .shop-btn{
  flex:1;
  max-width:240px;
  margin:0;
}
.empty{ text-align:center; color:#888; margin:30px 0; }

/* === КОРЗИНА (исправления) === */
.list-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px;
  border-bottom: 2px solid #FFB0E2;
}

.cart-img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 6px;
}

.cart-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; /* было center */
}
.cart-title {
  margin-top: 0; /* прибиваем кверху */
}


.cart-price {
  font-size: 14px;
  color: #9B2020;
}

.cart-variant {
  font-size: 13px;
  color: #666;
  margin-top: 4px;
}

.cart-controls {
  display: flex;
  align-items: center;
  gap: 6px;
}

.cart-qty {
  font-size: 15px;
  font-weight: 600;
  min-width: 20px;
  text-align: center;
}

.cart-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: none;
  background: #fff;
  color: #9B2020;
  font-size: 18px;
  font-weight: 600;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}


/* Карточка заказа в списке */
.order-card {
  border: 2px solid #FFB0E2;   /* розовая рамка */
  border-radius: 12px;
  padding: 12px;
  margin: 10px 0;
  background: var(--card-bg);
  cursor: pointer;
  transition: transform .2s ease;
}
.order-card:hover { transform: scale(1.01); }

/* Детали заказа */
.order-detail {
  padding: 12px;
}
.order-detail-item {
  margin: 6px 0;
  font-size: 15px;
}
.order-detail-item b {
  color: #9B2020;
}


/* === TABBAR === */
.tabbar{
  position:fixed; bottom:var(--tabbar-bottom); left:10px; right:10px; height:var(--tabbar-h);
  display:flex; justify-content:space-around; align-items:center;
  background:#ffe6f3; border:1px solid var(--border); border-radius:20px;
}
.tabbar button{
  background:none; border:none; font-size:20px; color:#000;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  padding-top:12px; flex:1; height:100%; position:relative;
}
.tabbar button small{ font-size:11px; line-height:1; margin-top:4px; }
.tabbar button.active{ color:#9B2020; font-weight:600; }
.counter{
  background:red; color:#fff; font-size:12px; padding:2px 6px; border-radius:12px;
  position:absolute; top:5px; right:25px;
}

/* === TOAST === */
.toast{
  position:fixed; bottom:100px; left:50%; transform:translateX(-50%);
  background:var(--accent); color:#fff; padding:10px 16px; border-radius:20px;
  opacity:0; transition:opacity .3s;
}
.toast.show{ opacity:1; }

/* === МОДАЛЬНОЕ ОФОРМЛЕНИЕ === */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  z-index:999;
}
.modal.open{ display:flex; }
.modal-backdrop{
  position:absolute; inset:0; background:rgba(0,0,0,0.4);
}
.modal-content{
  position:relative; background:var(--bg); color:var(--text);
  width:90%; max-width:420px; border-radius:20px; padding:24px;
  box-shadow:0 18px 40px rgba(0,0,0,0.2); overflow-y:auto; max-height:90vh; z-index:1;
}
.modal-close{
  position:absolute; top:12px; right:16px; border:none; background:none;
  font-size:24px; color:#999; cursor:pointer;
}
.modal-title{ margin:0 0 16px; text-align:center; font-size:20px; }
.form-group{ display:flex; flex-direction:column; gap:6px; margin-bottom:14px; }
.form-group input{ padding:12px 14px; border-radius:12px; border:1px solid var(--border); font-size:15px; }
.form-group input:focus{ outline:none; border-color:#ffb0e2; box-shadow:0 0 0 2px rgba(255,176,226,0.25); }
.form-radio{ display:block; margin-bottom:8px; font-size:15px; }
.form-radio input{ margin-right:8px; }
fieldset.form-group{ border:1px solid var(--border); border-radius:12px; padding:12px 16px; margin-bottom:14px; }
fieldset.form-group legend{ padding:0 6px; font-size:14px; font-weight:600; }
.form-summary{ display:flex; justify-content:space-between; align-items:center; font-weight:700; margin:12px 0 18px; font-size:16px; }
#checkout-submit{ width:100%; margin:0; }
.form-error{ margin-top:12px; color:#c2185b; font-size:14px; text-align:center; }

/* === КАРУСЕЛЬ НА ГЛАВНОЙ === */
.carousel{ position:relative; margin:16px 0 8px; border-radius:14px; overflow:hidden; background:#f4f4f4; }
.carousel-track{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
}
.carousel-track::-webkit-scrollbar{ display:none; }
.carousel-item{
  width:100%;
  height:220px;
  object-fit:cover;
  display:block;
  flex:0 0 100%;
  scroll-snap-align:center;
  background:#eaeaea;
}
.carousel-dots{
  position:absolute; left:50%; bottom:8px; transform:translateX(-50%);
  display:flex; gap:6px; padding:6px 10px; background:rgba(0,0,0,.25); border-radius:12px; backdrop-filter:saturate(140%) blur(6px);
}
.carousel-dots button{ width:6px; height:6px; border-radius:50%; border:none; background:rgba(255,255,255,.6); }
.carousel-dots button.active{ background:#fff; }
.carousel-nav{
  position:absolute; top:50%; transform:translateY(-50%);
  width:32px; height:32px; border:none; border-radius:50%;
  background:rgba(0,0,0,.35); color:#fff; font-size:18px; display:flex; align-items:center; justify-content:center;
}
.carousel-nav.prev{ left:8px; } .carousel-nav.next{ right:8px; }
